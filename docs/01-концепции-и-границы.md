# Концепции и границы проекта

## Цель продукта

Сайт с детскими рассказами/сказками:

- **Читалка**: режим “книга” (разворот на широких экранах, одна страница на вертикальных).
- **Контент**: текст + иллюстрации (в перспективе короткие видео) в единой стилистике.
- **Менеджерский контур**: загрузка текста, полуавтоматическая подготовка, генерация ассетов, ревью, публикация.

## Ключевые принципы (должны сохраняться при смене технологий)

### 1) Канонический контент ≠ страницы
Мы **не храним** “страницу №12” как источник истины, потому что пагинация зависит от устройства/шрифта/ориентации.

Храним:
- структурированный текст (сцены/абзацы/блоки),
- **якоря** для иллюстраций/видео (привязка к смыслу, а не к номеру страницы),
- версии и историю изменений.

Страницы вычисляются при рендеринге в читалке.

### 2) Асинхронный пайплайн
Импорт, корректура, сегментация, генерация изображений/видео — это **фоновые задачи**:
- у задач есть статусы,
- ретраи,
- идемпотентность,
- наблюдаемость (логи/прогресс/ошибки).

### 3) Человек в контуре
Менеджер делает финальное решение:
- принять/отклонить/перегенерировать ассет,
- поправить текст/якорь,
- опубликовать версию.

Автоматизация должна **ускорять** ревью, а не заменять его.

### 4) “Умность” делается гибридно
- Детерминированные правила — для стабильности (нормализация, грубая сегментация, валидации).
- LLM — для трудноформализуемого (сцены, краткие описания, предложение якорей, аккуратная корректура).

## Нецели (на MVP)
- “Умный” импорт по ссылкам с хитрой пагинацией (можно позже; MVP — файлы).
- Автоматическая публикация без ревью человеком.
- Видео-генерация (оставляем расширением).

## Риски и как их гасим концептуально

- **Зависимость от устройства**: решаем клиентской пагинацией и якорями.
- **Стоимость генерации**: лимиты перегенераций, пресеты по числу сцен/иллюстраций, кэширование.
- **Нестабильность LLM**: строгие форматы вывода, валидации, версия результатов.

