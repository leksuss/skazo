# Читалка и пагинация (концептуально)

## Требование UX
- На планшете / широком экране: **разворот** (две страницы рядом).
- На вертикальном экране: **одна страница**.
- Перелистывание (жесты/кнопки), предзагрузка следующей страницы.

## Почему “страницы” нельзя хранить в БД как источник истины
Потому что “страница” зависит от:
- ширины/высоты экрана,
- ориентации,
- размера шрифта и межстрочного интервала,
- доступности (крупный шрифт),
- языка (разная длина строк).

Если хранить страницы в БД — придётся хранить N вариантов под каждый девайс и ломать консистентность.

## Правильный подход

### Канонический слой
Храним:
- блоки текста (обычно абзацы),
- сцены (группы блоков),
- якоря ассетов (“после блока” / “к сцене”),
- ассеты и их варианты (по форматам/соотношениям сторон).

### Рендеринг
На клиенте:
- берём поток блоков,
- считаем layout (измеряем высоту при текущем стиле),
- наполняем “страницу” до лимита,
- переносим остаток на следующую.

Для разворота:
- считаем две страницы параллельно или как две последовательные страницы, отображаем рядом.

## Как показывать иллюстрации
Иллюстрация не “принадлежит странице №X”.
Она привязана к якорю:
- “показать рядом со сценой”,
- “вставить после конкретного блока”.

Так иллюстрация будет рядом со смыслом на любом устройстве.

## Кэширование (опционально)
Можно кэшировать “разбиение на страницы” для типовых пресетов:
- phone portrait,
- tablet landscape,
но это производная оптимизация, а не основа модели.
